# URL Shortener

–ü—Ä–æ—Å—Ç–æ–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Go (Golang) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL –∏ Redis.

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

*   **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –∞–ª–∏–∞—Å–∞ –¥–ª—è –¥–ª–∏–Ω–Ω–æ–≥–æ URL.
*   **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∞–ª–∏–∞—Å—ã**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—Ç—å —Å–≤–æ–π –∫—Ä–∞—Å–∏–≤—ã–π –∫–æ–¥.
*   **–†–µ–¥–∏—Ä–µ–∫—Ç**: –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL (302 Found).
*   **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ì–æ—Ä—è—á–∏–µ —Å—Å—ã–ª–∫–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ Redis –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏.
*   **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–ª–∏–∫–æ–≤ (IP, User-Agent, –≤—Ä–µ–º—è).
*   **Swagger UI**: –£–¥–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API.
*   **Graceful Shutdown**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ (–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –ë–î, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   **–Ø–∑—ã–∫**: Go 1.25+
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Gin (—á–µ—Ä–µ–∑ –æ–±–µ—Ä—Ç–∫—É wbf/ginext)
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 17 (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –∏ –∫–ª–∏–∫–æ–≤)
*   **–ö—ç—à**: Redis 7 (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ shortCode -> longURL)
*   **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Golang Migrate
*   **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger (Swag)
*   **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker & Docker Compose

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

*   `cmd/` - –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (main.go).
*   `config/` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∑–∞–≥—Ä—É–∑–∫–∞ YAML, ENV).
*   `internal/` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
    *   `controller/` - HTTP —Ö–µ–Ω–¥–ª–µ—Ä—ã (API —Å–ª–æ–π).
    *   `usecase/` - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞.
    *   `domain/` - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.
    *   `adapter/` - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î (Postgres, Redis).
*   `migrations/` - SQL —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
*   `pkg/` - –û–±—â–∏–µ –ø–∞–∫–µ—Ç—ã (–ª–æ–≥–≥–µ—Ä, —Ä–æ—É—Ç–µ—Ä, —É—Ç–∏–ª–∏—Ç—ã).
*   `static/` - –§—Ä–æ–Ω—Ç–µ–Ω–¥ (HTML/CSS).

## üèÅ –ó–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   Docker & Docker Compose
*   Make (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –ï–¥–∏–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞
–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã, –ø–æ–¥–Ω–∏–º–∞–µ—Ç –±–∞–∑—ã, –Ω–∞–∫–∞—Ç—ã–≤–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—Ç–∞—Ä—Ç—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
make start
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8080](http://localhost:8080)

### –î—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Make

*   `make test` ‚Äî –ó–∞–ø—É—Å–∫ Unit-—Ç–µ—Å—Ç–æ–≤.
*   `make stop` ‚Äî –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
*   `make start-local` ‚Äî –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Docker, –∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ (—á–µ—Ä–µ–∑ `go run`).
*   `make clean` ‚Äî –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö).

## üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
[http://localhost:8080/swagger/index.html](http://localhost:8080/swagger/index.html)

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

*   `POST /shorten` ‚Äî –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É.
    ```json
    {
      "url": "https://google.com",
      "alias": "my-link" // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    }
    ```
*   `GET /s/:short_url` ‚Äî –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ø–æ–ª–Ω—ã–π URL.
*   `GET /analytics/:short_url` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.

## ‚ö†Ô∏è –ö–æ–¥—ã –æ—à–∏–±–æ–∫

*   `200 OK` ‚Äî –£—Å–ø–µ—Ö.
*   `302 Found` ‚Äî –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç.
*   `400 Bad Request` ‚Äî –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON).
*   `404 Not Found` ‚Äî –°—Å—ã–ª–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.
*   `409 Conflict` ‚Äî –¢–∞–∫–æ–π –∞–ª–∏–∞—Å —É–∂–µ –∑–∞–Ω—è—Ç.
*   `422 Unprocessable Entity` ‚Äî –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL –∏ —Ç.–¥.).
*   `500 Internal Server Error` ‚Äî –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.
